# Nginx 

简单来说，NGINX是一个代理服务器，可以做正向也可以做反向代理

## 正向代理和反向代理
正向代理是一个位于客户端和目标服务器之间的代理代理服务器，为了从原始服务器获取内容，客户端向代理服务器发送一个请求，并且指定目标服务器，之后代理服务器向目标服务器转交并且将获得的内容返回给客户端。正向代理的情况下客户端必须要进行一些特别的设置才能使用。  

反向代理正好相反。对于客户端来说，反向代理好像目标服务器。并且客户端不需要进行任何设置，客户端向反向代理发送请求，接着反向代理判断请求走向何处，并且将请求转交非客户端，使得这像自己的一样，一次客户端并不会感知反向代理后面的服务，因此也不需要客户端做任何设置，只需要把反向代理服务器当成真正的服务器就好。  

## 正向代理和反向代理的区别
正向代理需要你主动设置代理服务器IP或域名进行访问，由设置的服务器IP或者域名去获取访问的内容并返回，而反向代理不需要你做任何事情，直接访问服务器真实IP或者域名去获取访问内容并返回。  
正向代理是代理客户端，为客户端发送请求，是真实客户端对服务器不可见，而反向代理是代理服务端，为服务端发收请求，使真实服务器对客户端不可见。   

## 常见指令

### alias 和 root 的区别
alias 似乎说的是虚拟路径    
root和alias的主要区别在于nginx如何解释location后面的uri，这会使两者分别以不同的方式将请求映射到服务器文件上。   
root处理的结果是： root路径 + location路径
alias处理的结果是： 使用alias路径替换location路径   
alias是一个目录别名的定义，root则是最上层目录的定义。   
使用alias是后面必须以 '/' 结束，否则找不到文件。   

### proxy_pass, rewrite


### location
语法规则：   
```js
location [=|~|~*|^~]/uri/{...}
```
- `~` 为区分大小写匹配（可用正则表达式）
- `!~` 为区分大小写不匹配
- `~*` 为不区分大小写匹配（可用正则表达式）
- `!~*` 为不区分大小写不匹配
- `^~` 开头表示uri以某个常规字符串开头，NGINX将在这个字符串匹配后停止进行正则表达式的匹配（location指令中正则表达式匹配的结果优先使用）
- `=` 表示精确的查找地址，如`location=/`他只会匹配uri为/ 的请求
- `@` 表示为一个location进行命名，即自定义一个location，这个location不能被外界所访问，只能用于nginx 产生的子请求，主要为error_page和try_files.


https://juejin.im/post/5a98f9bd51882555677df9f4